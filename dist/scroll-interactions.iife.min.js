/**
 * @author Luca Poldelmengo
 * @license MIT
 * @see {@link https://github.com/pldg/scroll-interactions}
 */
var scroll_interactions=function(){"use strict";function t(t){return"number"==typeof t&&!isNaN(parseFloat(t))}function e(t){return"string"==typeof t&&t.length>0}return function(r){var n=r.trigger;void 0===n&&(n=1);var o=r.progress;void 0===o&&(o=!1);var i=r.debug;void 0===i&&(i=!1);var s=r.root;void 0===s&&(s=null);var c,u,a,l,d,f,v=r.targets,g=r.unobserve,p=r.throttle,w=(c=0,u="down",function(){var t=s?s.scrollTop:window.pageYOffset,e=u;return t>c||t===c&&"down"===u?e="down":(t<c||t===c&&"up"===u)&&(e="up"),c=t,u=e,e}),b=!!o&&function(){var t=!1;try{var e={get passive(){t={passive:!0}}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}(),h=o&&"intersect"!==g,y={},m=[],E=[],x=!1,L=!0;function O(t){var e=document.createElement("div"),r=document.createElement("p");if(e.style.height="0px",e.style.borderTop="2px dashed grey",e.style.zIndex="9999",t){var o=t.getBoundingClientRect(),i=o.height,s=o.width;e.style.position="absolute",e.style.top=n*i+function(t){var e=window.pageYOffset,r=window.pageXOffset,n=document.body.clientTop||0,o=document.body.clientLeft||0,i=t.getBoundingClientRect(),s=i.top,c=i.left,u=i.height,a=i.width;return{top:s=s+e-n,left:c=c+r-o,height:u,width:a,bottom:s+u,right:c+a}}(t).top+"px",e.style.width=s+"px"}else e.style.position="fixed",e.style.width="100%",e.style.top=100*n+"vh";e.setAttribute("class",S()),r.style.fontFamily="monospace",r.style.color="grey",r.style.margin="0",r.style.padding="6px",r.innerText='targets: "'+v+'", trigger: '+n,e.appendChild(r),document.body.appendChild(e)}function S(){return"scroll-interactions--trigger-"+("."===v[0]||"#"===v[0]?v.substring(1):v)}function C(t){var e=100*t;return"-"+e+"% 0% -"+(100-e)+"% 0%"}function I(t,e){h&&(f=t[0].rootBounds.top),d&&t.forEach((function(t){var r=function(t){var e=t.isIntersecting,r=t.rootBounds.top,n=t.boundingClientRect.top>r;return e?"intersect":!e&&n?"below":"above"}(t),n=t.target,o=parseInt(n.dataset.scrollInteractions);d({direction:w(),progress:h?q(t):null,position:r,entry:t}),L&&h&&function(t){var e=function(t){return p?(e=o,r=p,n=Date.now(),function(){n+r-Date.now()<0&&(e(),n=Date.now())}):o;var e,r,n;function o(e){d({direction:w(),progress:q(t),position:"intersect",entry:t})}}(t);E.push({addScroll:function(){return window.addEventListener("scroll",e,b)},removeScroll:function(){return window.removeEventListener("scroll",e,b)}})}(t),h&&function(t,e){var r=t.isIntersecting,n=E[e],o=n.addScroll,i=n.removeScroll;r?o():r||L||i()}(t,o),g&&(!function(t,e,r){var n="below"===g&&"below"===t,o="intersect"===g&&"intersect"===t,i="above"===g&&"above"===t;("onLoad"===g||n||o||i)&&r.unobserve(e)}(r,n,e),m.push(o))})),L&&(L=!1)}function q(t){var e=t.target.getBoundingClientRect(),r=e.top,n=1/(e.height/(f-r));return n<0?0:n>1?1:parseFloat(n.toFixed(4))}function B(){throw new Error("`scroll-interactions` has not been initialized")}return y.init=function(){if(x)throw new Error("`scroll-interactions` has been already initialized");return function(){if(e(v)||r("targets"),!t(n)||n>1||n<0)throw new Error("`trigger` must be a number in 0..1 range");if(g){if(!(["onLoad","below","intersect","above"].indexOf(g)>-1))throw new Error('`unobserve` must be equal to: "onLoad" or "below" or "intersect" or "above"');if(o&&"intersect"===g)throw new Error('If `progress === true`, `unobserve` can\'t be equal to "intersect"')}if(!t(p)&&p>0)throw new Error("`throttle` must be a number > 0");function r(t){throw new Error("`"+t+"` must be a valid DOM selector")}s&&!e(s)&&r("root")}(),e(s)&&(a=document.querySelector(s)),!0===i&&O(a),l=new IntersectionObserver(I,{rootMargin:C(n),root:a||null}),[].slice.call(document.querySelectorAll(v)).forEach((function(t,e){t.hasAttribute("data-scroll-interactions")||t.setAttribute("data-scroll-interactions",e),-1===m.indexOf(e)&&l.observe(t)})),x=!0,y},y.observe=function(t){if(x||B(),"function"!=typeof t)throw new Error("`observe` requires a function");return d=t,y},y.disconnect=function(t){var e;return void 0===t&&(t=!1),x||B(),o&&E.forEach((function(t){return(0,t.removeScroll)()})),!0===i&&(e=document.querySelector("."+S())).parentNode.removeChild(e),t&&m.splice(0),l.disconnect(),x=!1,y},y.update=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=!1),y.disconnect(e),v=t.targets||v,n=t.trigger||n,g=t.unobserve||g,o=t.progress||o,p=t.throttle||p,s=t.root||s,i=t.debug||i,y.init(),y},Object.freeze(y)}}();
