/**
 * @license MIT
 * @author Luca Poldelmengo
 * @see {@link https://github.com/pldg/scrollzzz}
 */
function scrollzzz({entries:n,t:t=1,o:e=!1,root:o=null,debug:r=!1}){if(!isNonEmptyString)throw new Error("entries must be a valid DOM selector");if(!isNumber(t)||t>1||t<0)throw new Error("trigger must be a number in 0..1 range");if(!isBoolean(r))throw new Error("debug must be boolean");const i=[...document.querySelectorAll(n)],s=function(){let n=0,t="down";return function(){const e=o?o.scrollTop:window.pageYOffset;let r=t;return e>n||e===n&&"down"===t?r="down":(e<n||e===n&&"up"===t)&&(r="up"),n=e,t=r,r}}(),u={},c={};let l,d=!1,f={},w=!0;function a(){return`scrollzzz-trigger--${"."===n[0]||"#"===n[0]?n.substring(1):n}`}function p(){const n=100*t;return`-${n}% 0% -${100-n}% 0%`}function g(n,t){f.i=n[0].s.top,n.forEach(n=>{const o=n.u;if(u.hasOwnProperty("onIntersect")&&(u.l({direction:s(),p:n}),e&&o&&t.unobserve(n.target)),!e&&u.hasOwnProperty("onScroll")){const{g:t}=f;o?(f.p=n,f.h=n.target.getBoundingClientRect().height,window.addEventListener("scroll",h,t)):o||w||window.removeEventListener("scroll",h,t)}}),w&&(w=!1)}function h(n){u.m({direction:s(),p:f.p,v:m()})}function m(){const{p:n,h:t,i:e}=f,{top:o}=n.target.getBoundingClientRect(),r=1/(t/(e-o));return r<0?0:r>1?1:parseFloat(r.toFixed(4))}function b(){throw new Error("scrollzzz has not been initialized")}return c.init=()=>{if(d)throw new Error("scrollzzz has beed already initialized");return l=new IntersectionObserver(g,{$:p(),root:o}),i.forEach(n=>l.observe(n)),!0===r&&function(){const e=document.createElement("div"),r=document.createElement("p");if(e.style.height="0px",e.style.borderTop="2px dashed grey",e.style.zIndex="9999",null===o)e.style.position="fixed",e.style.width="100%",e.style.top=`${100*t}vh`;else{const{height:n,width:r}=o.getBoundingClientRect();e.style.position="absolute",e.style.top=`${t*n+getCoords(o).top}px`,e.style.width=`${r}px`}r.style.fontFamily="monospace",r.style.color="grey",r.style.margin="0",r.style.padding="6px",r.innerText=`entries: "${n}", trigger: ${t}`,e.setAttribute("class",a()),e.appendChild(r),document.body.appendChild(e)}(),d=!0,c},c.disconnect=()=>(d||b(),l.disconnect(),!0===r&&function(){const n=document.querySelector(`.${a()}`);n.parentNode.removeChild(n)}(),d=!1,c),c.update=(e={})=>(c.disconnect(),n=e.entries||n,t=e.t||t,o=e.root||o,r=e.debug||r,c.init(),c),c.l=n=>{if(d||b(),"function"!=typeof n)throw new Error("onIntersect requires a function");return u.l=n,c},c.m=n=>{if(d||b(),"function"!=typeof n)throw new Error("onScroll requires a function");return u.m=n,f.g=addPassiveIfSupported(),c},Object.freeze(c)}function isNumber(n){return"number"==typeof n&&!Number.isNaN(n)}function isNonEmptyString(n){return"string"==typeof n&&n.length>0}function isBoolean(n){return"boolean"==typeof n}function getCoords(n){const t=window.pageYOffset,e=window.pageXOffset,o=document.body.clientTop||0,r=document.body.clientLeft||0;let{top:i,left:s,height:u,width:c}=n.getBoundingClientRect();return{top:i=i+t-o,left:s=s+e-r,height:u,width:c,bottom:i+u,right:s+c}}function addPassiveIfSupported(){let n=!1;try{const t={get g(){n={g:!0}}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){n=!1}return n}function isNodejs(){return"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node}isNodejs()&&(module.exports=scrollzzz);